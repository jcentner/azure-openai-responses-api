    token = token_provider()
    headers = {"Authorization": f"Bearer {token}"}
    params = {"api-version": "preview"}

    for file in extracted_files:
        container_id = file['container_id']
        file_id = file['file_id']
        filename = file['filename']
        url = f"{AOAI_API_BASE}openai/v1/containers/{container_id}/files/{file_id}/content"

        try:        
            response_req = requests.get(url, headers=headers, params=params, timeout=30)
            if response_req.status_code == 200:
                Path("./downloads").mkdir(exist_ok=True)
                file_path = Path("./downloads") / filename
            
                with open(file_path, 'wb') as f:
                    f.write(response_req.content)

                print(f"Successfully downloaded to {file_path}")
            else:
                print(f"Failed to download container file {filename}, status code: {response_req.status_code}")
        except Exception as e:
            print(f"Exception: {str(e)}")
